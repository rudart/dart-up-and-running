# Обзор языка. Библиотеки и видимость
Для организации модульного и удобного для дальнейшего использования кода используются подключаемые библиотеки и части кода.

Библиотеки обеспечивают не только API, они так же позволяют скрывать в себе закрытые идентификаторы. Идентификаторы, которые начинаются с символа подчеркивания "_" могут быть видны только внутри библиотеки. Каждое приложение написанное на dart представляет из себя библиотеку, даже если не использует директиву библиотеки.

Библиотеки могут распространяться с помощью пакетов. В разделе [pub: The Dart Package Manager](https://www.dartlang.org/docs/dart-up-and-running/contents/ch04-tools-pub.html) приведено больше информации о включенном в SDK менеджере пакетов.

## Использование библиотек
Используя директиву "import" можно указать пространство имен для библиотеки которая будет использоваться в рамках другой библиотеки.

Например, приложения Dart часто используют dart:html библиотеку, которая может быть импортирована так:

```
import 'dart:html';
```
Единственный обязательный аргумент "import", это URI нужной библиотеки. Для встроенных в язык библиотек, URI имеет специальную схему *dart:*. Для остальных библиотек используется системный путь до библиотеки или схема *package*. *Package* указывает на библиотеки предоставляемые менеджером пакетов - pub. Например:

```
import 'dart:io';
import 'package:mylib/mylib.dart';
import 'package:utils/utils.dart';
```

### Определение префикса для библиотеки
Конфликт имен может возникнуть при подключении двух разных библиотек содержащих одинаковые идентификаторы, на такой случай предусмотрена возможность задания префикса для библиотеки. Например, если обе библиотеки "lib1" и "lib2" имеют класс "Element", то использование префикса поможет избежать появление конфликта:

```java
import 'package:lib1/lib1.dart';
import 'package:lib2/lib2.dart' as lib2;
// ...
var element1 = new Element();      // Используется Element из lib1.
var element2 = new lib2.Element(); // используется Element из lib2.
```

### Подключение только части библиотеки
Если нужно использовать только часть библиотеки, то при её подключении возможно указывать какая её часть будет импортирована. Например:

```java
import 'package:lib1/lib1.dart' show foo; // Импортируется ТОЛЬКО foo.
import 'package:lib2/lib2.dart' hide foo; // Импортируется все КРОМЕ foo.
```

## Создание библиотеки
Название библиотеки задается с помощью "library", для того что бы указать дополнительные части библиотеки следует использовать "part".

> **Примечание**
>
> Вам не нужно объявлять свое приложение как библиотеку (в файле который содержит самую важную 'top-level' main() функцию), но делая это вы получаете возможность разбивать свое приложение на части (parts).

### Объявление библиотеки
Для указания имени библиотеки используется *library identifier*:
```
library ballgame;   // Объявляет библиотеку с именем ballgame.

import 'dart:html'; // Это приложение использует HTML библиотеку.
// ...Остальной код...
```

### Связывание файла с библиотекой
Что бы добавить файл в котором находится часть кода библиотеки, достаточно добавить: *"part fileUri"*, в файл самой библиотеки. *fileUri* - пусть до файла. В том файле который содержит часть кода, необходимо добавить описание, к какой библиотеки относится эта часть. Это делается добавлением *part of identifier* в файл с частью кода, где *identifier* - название библиотеки. Следующий пример демонстрирует использование *part* и *part of* для разделение библиотеки на три файла.

Первый файл, *ballgame.dart*, содержит библиотеку *ballgame*, подключает другие необходимые библиотеки и объявляет *ball.dart* и *util.dart* как части библиотеки.

```
library ballgame;

import 'dart:html';
// ...Остальные подключаемые библиотеки...

part 'ball.dart';
part 'util.dart';

// ...Код может быть здесь...
```

Второй файл, *ball.dart*, реализует часть библиотеки *ballgame*:
```
part of ballgame;

// ...Остальной код здесь...
```

Третий файл, *util.dart,*, содержит остальную часть библиотеки *ballgame*:
```
part of ballgame;

// ...Остальной код здесь...
```

### Повторно используемые библиотеки
Библиотеки можно комбинировать, использовать одну библиотеку с подключенными другими библиотеками, или библиотеки могут содержать сразу несколько библиотек. К примеру, Вы можете писать большую библиотеку, в виде набора небольших библиотек. Или Вы можете писать библиотеку, которая предоставляет подмножество методов из других библиотек.

```
// Файл french.dart:
library french;
hello() => print('Bonjour!');
goodbye() => print('Au Revoir!');

// Файл togo.dart:
library togo;
import 'french.dart';
export 'french.dart' show hello;

// Другой файл .dart:
import 'togo.dart';

void main() {
  hello();   //выводится: bonjour
  goodbye(); //ОШИБКА
}
```