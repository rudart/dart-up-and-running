# dart:async. Потоки

Объекты потоков представлены во всем Dart API и представляют собой последовательность данных. Например, события HTML, такие как нажатие на кнопку, распространяются с помощью потоков. Также вы можете читать файл как поток.

## Прослушка потока

Чтобы получить значение сразу, как только оно поступило, подпишитесь на поток с помощью метода `listen()`:

```java
// Найдем кнопку по ID и подпишемся на событие клика.
querySelector('#submitInfo').onClick.listen((e) {
  // Когда кнопку нажмут, то выполнится этот код
  submitData();
});
```

В этом примере, свойство `onClick` - это объект Stream, который принадлежит кнопке `#submitInfo`.

Если вам нужно среагировать только на один факт наступления события, то вы можете использовать такие свойства, как `first`, `last` или `single`. Для того, чтобы проверить это событие на соответствие какому-либо условию перед тем, как среагировать на него, используйте методы `firstWhere()`, `lastWhere()` или `singleWhere()`. 

## Изменение данных потока

Зачастую нужно изменить формат данных потока перед их использованием. Используйте метод `transform()` для создания потока с другим форматом данных:

```java
var config = new File('config.txt');
Stream<List<int>> inputStream = config.openRead();

inputStream
  .transform(UTF8.decoder)
  .transform(new LineSplitter())
  .listen(
    (String line) {...} ...);
```

Этот пример использует два трансформера. Первый использует `UTF8.decoder` для преобразования потока целочисленных данных в поток строк (здесь это будет поток отдельных символов). Затем используется `LineSplitter` для изменения потока символов (объекты String) в поток строк (тоже объекты String, но они уже будут представлять из себя строки файла). Эти трансформеры находятся в библиотеке `dart:convert` (посмотрите статью "[dart:convert - кодирование и декодирование JSON, UTF-8 и прочего](https://www.dartlang.org/docs/dart-up-and-running/contents/ch03.html#ch03-dart-convert)") .